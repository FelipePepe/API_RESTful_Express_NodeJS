<form id="login" method="POST">
  <input type="email" name="email" value="" placeholder="Tu email" />
  <br /><br />
  <input type="password" name="password" value="" placeholder="ContraseÃ±a" />
  <br /><br />
  <input type="submit" value="login" />
</form>

<script>
  const formLogin = document.querySelector("#login");

  formLogin.addEventListener("submit", (event) => {
    event.preventDefault();

    const formData = new FormData(formLogin);

    let data = {
      email: formData.get("email"),
      password: formData.get("password"),
    };

    const customHeader = new Headers();
    customHeader.append("Content-Type", "application/json");

    console.log("jsondata:", data);

    fetch("/api/signIn", {
      mode: "cors",
      method: "POST",
      headers: customHeader,
      body: JSON.stringify(data),
    })
      .then((res) => res.json())
      .then((data) => {
        console.log("data", data);
        localStorage.setItem("token", data.token);
        window.location.replace("/product");
      })
      .catch((error) => console.error(error));
  });
</script>
